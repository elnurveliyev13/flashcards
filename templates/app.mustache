<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#0B1220">
<div id="mod_flashcards_container"
     data-ai-click="{{#str}} ai_click_hint, mod_flashcards {{/str}}"
     data-ai-disabled="{{#str}} ai_helper_disabled, mod_flashcards {{/str}}"
     data-ai-detecting="{{#str}} ai_detecting, mod_flashcards {{/str}}"
     data-ai-success="{{#str}} ai_helper_success, mod_flashcards {{/str}}"
     data-ai-error="{{#str}} ai_helper_error, mod_flashcards {{/str}}"
     data-ai-no-text="{{#str}} ai_no_text, mod_flashcards {{/str}}"
     data-focus-audio-label="{{#str}} focus_audio_badge, mod_flashcards {{/str}}"
     data-front-audio-label="{{#str}} front_audio_badge, mod_flashcards {{/str}}"
     data-voice-placeholder="{{#str}} tts_voice_placeholder, mod_flashcards {{/str}}"
     data-voice-missing="{{#str}} tts_voice_missing, mod_flashcards {{/str}}"
     data-voice-disabled="{{#str}} tts_voice_disabled, mod_flashcards {{/str}}"
     data-tts-success="{{#str}} tts_status_success, mod_flashcards {{/str}}"
     data-tts-error="{{#str}} tts_status_error, mod_flashcards {{/str}}">
  <div class="wrap">
    <div id="srStatus" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>
    <!-- Access Status Banner -->
    <div id="accessStatusBanner" class="access-status-banner hidden">
      <div class="access-status-content">
        <div class="access-status-icon" id="accessStatusIcon">ℹ️</div>
        <div class="access-status-text">
          <div class="access-status-title" id="accessStatusTitle"></div>
          <div class="access-status-desc" id="accessStatusDesc"></div>
        </div>
        <div class="access-status-actions" id="accessStatusActions"></div>
      </div>
    </div>

    <header>
      <div class="header-top">
        <h1 id="t_appTitle">{{#str}} app_title, mod_flashcards {{/str}}</h1>
        <div class="header-actions">
          <div class="header-stats">
            <span class="header-stat" title="Total Cards Created">
              <span class="header-stat-icon icon-plus">&#10133;</span>
              <span id="headerTotalCards">0</span>
            </span>
            <span class="header-stat" title="{{#str}} dashboard_active_vocab, mod_flashcards {{/str}}">
              <span class="header-stat-icon">&#128209;</span>
              <span id="headerActiveVocab">0</span>
            </span>
            <span class="header-stat" title="Current Streak">
              <span class="header-stat-icon">&#128293;</span>
              <span id="headerStreak">0</span>
            </span>
          </div>
          <select id="langSel">
            <option value="en">EN</option>
            <option value="no">NO</option>
            <option value="uk">UK</option>
          </select>
        </div>
      </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="fc-tabs" role="tablist">
      <button class="fc-tab" id="tabQuickInput" role="tab" aria-selected="false" aria-controls="quickInputSection">
        <span class="fc-tab-icon icon-plus">&#10133;</span>
        <span class="fc-tab-label" id="t_tab_quickinput">{{#str}} tab_quickinput, mod_flashcards {{/str}}</span>
      </button>
      <button class="fc-tab fc-tab-active" id="tabStudy" role="tab" aria-selected="true" aria-controls="studySection">
        <span class="fc-tab-icon">&#128218;</span>
        <span class="fc-tab-label" id="t_tab_study">{{#str}} tab_study, mod_flashcards {{/str}}</span>
        <span class="fc-tab-badge hidden" id="studyBadge"></span>
      </button>
      <button class="fc-tab" id="tabDashboard" role="tab" aria-selected="false" aria-controls="dashboardSection">
        <span class="fc-tab-icon">&#128200;</span>
        <span class="fc-tab-label" id="t_tab_dashboard">{{#str}} tab_dashboard, mod_flashcards {{/str}}</span>
      </button>
    </nav>

    <div class="row hidden">
      <select id="deckSelect"></select>
      <button id="btnActivate">{{#str}} activate, mod_flashcards {{/str}}</button>
      <span id="badge" class="pill">{{#str}} choose, mod_flashcards {{/str}}</span>
      <span id="dueInfo" class="pill" data-label="{{#str}} list_due, mod_flashcards {{/str}}">{{#str}} due, mod_flashcards {{/str}}</span>
      <label class="pill"><input id="packFile" type="file" accept="application/json"><span id="t_loadPack">{{#str}} loadpack, mod_flashcards {{/str}}</span></label>
    </div>

    <!-- Quick Input Section (Default) -->
    <div class="fc-tab-content" id="quickInputSection" role="tabpanel" aria-labelledby="tabQuickInput">
      <div class="fc-editor-wrap">
        <div class="card" id="cardCreationFormWrap">
          <div class="card-form-content" id="cardCreationForm">
            <div class="fc-quick-media">
              <div class="fc-quick-media-grid">
                <button id="btnRec" class="fc-quick-media-btn fc-media-large micbtn" title="{{#str}} title_record, mod_flashcards {{/str}}" aria-label="{{#str}} title_record, mod_flashcards {{/str}}">
                  <span class="fc-media-icon">&#127897;&#65039;</span>
                  <span class="fc-media-label">{{#str}} quick_audio, mod_flashcards {{/str}}</span>
                  <span id="recTimer" class="rec-timer hidden">00:00</span>
                </button>
                <label for="uAudio" class="fc-link-btn fc-media-link">{{#str}} chooseaudiofile, mod_flashcards {{/str}}</label>
                <button id="btnImagePicker" class="fc-quick-media-btn fc-media-large" title="{{#str}} title_camera, mod_flashcards {{/str}}" aria-label="{{#str}} title_camera, mod_flashcards {{/str}}">
                  <span class="fc-media-icon">&#128247;</span>
                  <span class="fc-media-label">{{#str}} quick_photo, mod_flashcards {{/str}}</span>
                </button>
              </div>
            </div>
            <button id="btnStop" class="iconbtn hidden" title="{{#str}} title_stop, mod_flashcards {{/str}}" aria-label="{{#str}} title_stop, mod_flashcards {{/str}}">&#9209;</button>
            <input id="uAudio" type="file" accept="audio/mpeg,audio/mp3,audio/wav,audio/ogg,audio/m4a,audio/aac" class="hidden">
            <audio id="audPrev" class="hidden" controls preload="metadata"></audio>
            <audio id="focusAudPrev" class="hidden" controls preload="metadata"></audio>
            <input id="uImage" type="file" accept="image/*" class="hidden">
            <div class="fc-media-badges">
              <span id="audBadge" class="media-pill hidden">
                <span class="icon">&#127897;&#65039;</span>
                <span id="audName" class="media-name"></span>
                <button id="btnClearAud" class="iconbtn" title="Clear">&times;</button>
              </span>
              <span id="focusAudBadge" class="media-pill hidden">
                <span class="icon">&#128266;</span>
                <span id="focusAudName" class="media-name"></span>
                <button id="btnClearFocusAud" class="iconbtn" title="Clear">&times;</button>
              </span>
              <span id="imgBadge" class="media-pill hidden">
                <span class="icon">&#128247;</span>
                <span id="imgName" class="media-name"></span>
                <button id="btnClearImg" class="iconbtn" title="Clear">&times;</button>
              </span>
            </div>
            <img id="imgPrev" class="media hidden" alt=""/>
            <div class="slot hidden" id="slot_ttsVoice">
              <span class="tag">{{#str}} tts_voice, mod_flashcards {{/str}}</span>
              <select id="ttsVoice"></select>
              <div class="small" id="ttsVoiceStatus">{{#str}} tts_voice_hint, mod_flashcards {{/str}}</div>
            </div>
            <div class="slot">
              <span class="tag" id="t_frontText">{{#str}} front, mod_flashcards {{/str}}</span>
              <textarea id="uFront" class="autogrow" placeholder="Front..." autofocus></textarea>
            </div>
            <div class="slot focus-helper-slot">
              <div class="focus-helper-head">
                <span class="tag">{{#str}} ai_helper_label, mod_flashcards {{/str}}</span>
                <span class="focus-helper-hint" id="focusHelperHint">{{#str}} ai_click_hint, mod_flashcards {{/str}}</span>
              </div>
              <div id="focusWordList" class="focus-word-list"></div>
              <div id="focusHelperStatus" class="focus-helper-status small"></div>
            </div>
            <div class="slot">
              <span class="tag">{{#str}} fokus, mod_flashcards {{/str}}</span>
              <textarea id="uFokus" class="autogrow" placeholder="Fokus word/phrase..."></textarea>
            </div>
            <div class="slot">
              <span class="tag">{{#str}} focus_baseform, mod_flashcards {{/str}}</span>
              <input id="uFocusBase" type="text" placeholder="{{#str}} focus_baseform_ph, mod_flashcards {{/str}}">
            </div>
            <div class="slot" id="slot_translation_local">
              <span class="tag" id="tag_trans_local">Translation (?)</span>
              <textarea id="uTransLocal" class="autogrow" placeholder="Translation..."></textarea>
            </div>

            <div class="fc-quick-advanced-toggle">
              <button id="btnEditorAdvanced" class="fc-link-btn">
                <span id="editorAdvancedLabel">{{#str}} show_advanced, mod_flashcards {{/str}}</span>
                <span id="editorAdvancedIcon">&#9660;</span>
              </button>
            </div>

            <div id="editorAdvancedFields" class="fc-quick-advanced hidden">
              <div class="slot" id="slot_translation_en">
                <span class="tag">Translation (English)</span>
                <textarea id="uTransEn" class="autogrow" placeholder="Translation (English)..."></textarea>
              </div>
              <div class="slot">
                <span class="tag" id="t_explanationText">{{#str}} explanation, mod_flashcards {{/str}}</span>
                <textarea id="uExplanation" class="autogrow" placeholder="Explanation..."></textarea>
              </div>
              <div class="slot">
                <span class="tag">{{#str}} transcription, mod_flashcards {{/str}}</span>
                <div class="row has-action">
                    <div class="input-wrap">
                     <input id="uTranscription" type="text" placeholder="[IPA e.g. /hu:s/]">
                  </div>
                </div>
              </div>
              <div class="slot">
                <span class="tag">{{#str}} pos, mod_flashcards {{/str}}</span>
                <div class="row has-action">
                  <div class="input-wrap">
                    <select id="uPOS">
                    <option value="">-</option>
                    <option value="substantiv">Substantiv ? navn pa steder, personer, ting og fenomener</option>
                    <option value="adjektiv">Adjektiv ? beskriver substantiv</option>
                    <option value="pronomen">Pronomen ? settes i stedet for et substantiv</option>
                    <option value="determinativ">Determinativ ? bestemmer substantivet n?rmere</option>
                    <option value="verb">Verb ? navn pa en handling</option>
                    <option value="adverb">Adverb ? beskriver/modifiserer verb, adjektiv eller andre adverb</option>
                    <option value="preposisjon">Preposisjon ? forteller hvor verbet/substantivet befinner seg i forhold til et annet verb/substantiv i bade tid og rom</option>
                    <option value="konjunksjon">Konjunksjon ? binder sammen to og to ord av samme ordklasse eller to helsetninger</option>
                    <option value="subjunksjon">Subjunksjon ? innleder leddsetninger</option>
                    <option value="interjeksjon">Interjeksjon ? lydmalende ord, folelser eller meninger</option>
                    <option value="phrase">Phrase</option>
                  </select>
                  </div>
                </div>
                <div id="uPOSHelp" class="small"></div>
              </div>
              <div class="slot" id="slot_gender">
                <span class="tag">{{#str}} gender, mod_flashcards {{/str}}</span>
                <select id="uGender">
                  <option value="">-</option>
                  <option value="hankjonn">hankjønn</option>
                  <option value="hunkjonn">hunkjønn</option>
                  <option value="intetkjonn">intetkjønn</option>
                </select>
              </div>
              <div class="slot" id="slot_noun_forms">
                <span class="tag">{{#str}} noun_forms, mod_flashcards {{/str}}</span>
                <div class="grid-forms">
                  <label>Indef. singular<input id="uNounIndefSg" type="text"></label>
                  <label>Def. singular<input id="uNounDefSg" type="text"></label>
                  <label>Indef. plural<input id="uNounIndefPl" type="text"></label>
                  <label>Def. plural<input id="uNounDefPl" type="text"></label>
                </div>
              </div>
              <div class="slot" id="slot_verb_forms">
                <span class="tag">{{#str}} verb_forms, mod_flashcards {{/str}}</span>
                <div class="grid-forms">
                  <label>Infinitiv<input id="uVerbInfinitiv" type="text"></label>
                  <label>Presens<input id="uVerbPresens" type="text"></label>
                  <label>Preteritum<input id="uVerbPreteritum" type="text"></label>
                  <label>Perfektum partisipp<input id="uVerbPerfektum" type="text"></label>
                  <label>Imperativ<input id="uVerbImperativ" type="text"></label>
                </div>
              </div>
              <div class="slot" id="slot_adj_forms">
                <span class="tag">{{#str}} adj_forms, mod_flashcards {{/str}}</span>
                <div class="grid-forms">
                  <label>Positiv<input id="uAdjPositiv" type="text"></label>
                  <label>Komparativ<input id="uAdjKomparativ" type="text"></label>
                  <label>Superlativ<input id="uAdjSuperlativ" type="text"></label>
                </div>
              </div>
              <div class="slot">
                <span class="tag">{{#str}} collocations, mod_flashcards {{/str}}</span>
                <div class="row has-action">
                  <textarea id="uCollocations" class="autogrow" placeholder="collocations..."></textarea>
                </div>
              </div>
              <div class="slot">
                <span class="tag">{{#str}} examples, mod_flashcards {{/str}}</span>
                <div class="row has-action">
                  <textarea id="uExamples" class="autogrow" placeholder="examples..."></textarea>
                </div>
              </div>
              <div class="slot">
                <span class="tag">{{#str}} antonyms, mod_flashcards {{/str}}</span>
                <div class="row has-action">
                  <textarea id="uAntonyms" class="autogrow" placeholder="antonyms..."></textarea>
                </div>
              </div>
              <div class="slot">
                <span class="tag">{{#str}} cognates, mod_flashcards {{/str}}</span>
                <div class="row has-action">
                  <textarea id="uCognates" class="autogrow" placeholder="cognates..."></textarea>
                </div>
              </div>
              <div class="slot">
                <span class="tag">{{#str}} sayings, mod_flashcards {{/str}}</span>
                <div class="row has-action">
                  <textarea id="uSayings" class="autogrow" placeholder="sayings..."></textarea>
                </div>
              </div>
              <div class="slot">
                <span class="tag" id="t_order">{{#str}} order, mod_flashcards {{/str}}</span>
                <div id="orderChips" class="chips">
                  <button class="chip" data-kind="audio"       id="chip_audio">{{#str}} audio, mod_flashcards {{/str}}</button>
                  <button class="chip" data-kind="image"       id="chip_image">{{#str}} image, mod_flashcards {{/str}}</button>
                  <button class="chip" data-kind="text"        id="chip_text">{{#str}} front, mod_flashcards {{/str}}</button>
                  <button class="chip" data-kind="explanation" id="chip_explanation">{{#str}} explanation, mod_flashcards {{/str}}</button>
                  <button class="chip" data-kind="translation" id="chip_translation">{{#str}} back, mod_flashcards {{/str}}</button>
                </div>
                <div class="small" id="orderPreview">audio -> image -> text -> explanation -> translation</div>
              </div>
            </div>

            <div class="row2">
              <button id="btnUpdate" class="ok">Update</button>
              <button id="btnAdd" class="mid">Create new</button>
            </div>
            <div class="mono" id="status"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Study Section -->
    <div class="fc-tab-content fc-tab-active" id="studySection" role="tabpanel" aria-labelledby="tabStudy">
    <div class="grid">
      <div class="card">
        <div class="actionTop">
          <button id="btnList" class="iconbtn" title="{{#str}} list, mod_flashcards {{/str}}" aria-label="{{#str}} list, mod_flashcards {{/str}}">&#128220;</button>
          <button id="btnEdit" class="iconbtn hidden" title="{{#str}} title_edit, mod_flashcards {{/str}}">&#9998;</button>
          <button id="btnDel" class="iconbtn cross hidden" title="{{#str}} title_del, mod_flashcards {{/str}}">&times;</button>
        </div>
        <video id="cam" class="hidden capture-video" autoplay playsinline muted></video>
        <div class="front" id="front"></div>
        <div class="back" id="back"></div>
        <div id="slotContainer"></div>
        <div class="playRow">
          <button id="btnPlay" class="iconbtn hidden" title="{{#str}} title_play, mod_flashcards {{/str}}">&#128266;</button>
          <button id="btnPlaySlow" class="iconbtn hidden" title="{{#str}} title_slow, mod_flashcards {{/str}}">&#128034;</button>
        </div>
        <div class="meta">
          <button id="btnRevealNext" class="primary">{{#str}} showmore, mod_flashcards {{/str}}</button>
        </div>
        <button id="btnInstallApp" class="hidden install-btn install-btn-block" title="{{#str}} install_app, mod_flashcards {{/str}}">
          📱 {{#str}} install_app, mod_flashcards {{/str}}
        </button>
        <div id="iosInstallHint" class="ios-hint hidden" role="note">
          <button id="iosHintClose" class="ios-hint-close" title="Close" aria-label="Close">&times;</button>
          <div class="ios-hint-title">📱 {{#str}} ios_install_title, mod_flashcards {{/str}}</div>
          <div class="ios-hint-steps">
            <div class="ios-hint-line">
              <span class="ios-hint-step-prefix">{{#str}} ios_install_step1, mod_flashcards {{/str}}</span>
              <span class="step step-share">{{#str}} ios_share_button, mod_flashcards {{/str}}</span>
              <span class="ios-hint-step-suffix">{{#str}} ios_install_step1_suffix, mod_flashcards {{/str}}</span>
            </div>
            <div class="ios-hint-line">
              <span class="ios-hint-step-prefix">{{#str}} ios_install_step2, mod_flashcards {{/str}}</span>
              <span class="step step-add">{{#str}} ios_add_to_home, mod_flashcards {{/str}}</span>
              <span class="ios-hint-step-suffix">{{#str}} ios_install_step2_suffix, mod_flashcards {{/str}}</span>
            </div>
          </div>
        </div>
        <div id="emptyState" class="empty hidden">{{#str}} empty, mod_flashcards {{/str}}</div>
      </div>
      <!-- Card creation form (collapsible) -->
      <div class="card card-form-collapsed" id="cardCreationFormWrap">
        <div class="card-form-toggle" id="btnToggleForm">
          
          <div></div>
        </div>
        <div class="card-form-content" id="cardCreationForm">
          <div class="actionTop">
            <button id="btnFormReset" class="iconbtn ghost" title="Clear form"><span class="rot">&#8634;</span></button><button id="btnCancelEdit" class="iconbtn cross" title="Cancel">&times;</button>
          </div>
          <div class="slot">
            <span class="tag" id="t_addOwn">{{#str}} addown, mod_flashcards {{/str}}</span>
          </div>
        <div class="slot">
          <span class="tag" id="t_pickAudio">{{#str}} audio, mod_flashcards {{/str}}</span>
          <div class="previewRow">
            <input id="uAudio" type="file" accept="audio/*" class="hidden">
            <button id="btnChooseAud" class="btnFile">{{#str}} choosefile, mod_flashcards {{/str}}</button><span id="audName" class="fileName"></span>
            <button id="btnClearAud" class="iconbtn" title="Clear">&times;</button>
            <div class="rec-wrap">
              <button id="btnRec"  class="iconbtn micbtn" title="{{#str}} title_record, mod_flashcards {{/str}}" aria-label="{{#str}} title_record, mod_flashcards {{/str}}">&#127897;&#65039;</button>
              <button id="btnStop" class="iconbtn hidden" title="{{#str}} title_stop, mod_flashcards {{/str}}" aria-label="{{#str}} title_stop, mod_flashcards {{/str}}">&#9209;</button>
              <span id="recTimer" class="rec-timer hidden">00:00</span>
              <div id="recHint" class="rec-hint">{{#str}} press_hold_to_record, mod_flashcards {{/str}}</div>
            </div>
          </div>
          <audio id="audPrev" class="hidden" controls preload="metadata"></audio>
        </div>
        <div class="slot">
          <span class="tag" id="t_pickPhoto">{{#str}} image, mod_flashcards {{/str}}</span>
          <div class="previewRow">
            <input id="uImage" type="file" accept="image/*" class="hidden">
            <button id="btnChooseImg" class="btnFile">{{#str}} choosefile, mod_flashcards {{/str}}</button><span id="imgName" class="fileName"></span>
            <button id="btnClearImg" class="iconbtn" title="Clear">&times;</button>
            <!-- Camera controls positioned near image picker -->
            <button id="btnOpenCam" class="iconbtn" title="{{#str}} title_camera, mod_flashcards {{/str}}">&#128247;</button>
            <button id="btnShot" class="iconbtn hidden" title="{{#str}} title_take, mod_flashcards {{/str}}">&#128248;</button>
            <button id="btnCloseCam" class="iconbtn cross hidden" title="{{#str}} title_closecam, mod_flashcards {{/str}}">&times;</button>
          </div>
          <img id="imgPrev" class="media hidden" alt=""/>
        </div>
        <div class="slot">
          <span class="tag" id="t_frontText">{{#str}} front, mod_flashcards {{/str}}</span>
          <textarea id="uFront" class="autogrow" placeholder="Front..."></textarea>
        </div>
        <div class="slot">
          <span class="tag">{{#str}} fokus, mod_flashcards {{/str}}</span>
          <textarea id="uFokus" class="autogrow" placeholder="Fokus word/phrase..."></textarea>
        </div>
        <div class="slot">
          <span class="tag" id="t_explanationText">{{#str}} explanation, mod_flashcards {{/str}}</span>
          <textarea id="uExplanation" class="autogrow" placeholder="Explanation..."></textarea>
        </div>
        <!-- Language-aware translation fields -->
        <div class="slot" id="slot_translation_local">
          <span class="tag" id="tag_trans_local">Translation (?)</span>
          <textarea id="uTransLocal" class="autogrow" placeholder="Translation..."></textarea>
        </div>
        <div class="slot" id="slot_translation_en">
          <span class="tag">Translation (English)</span>
          <textarea id="uTransEn" class="autogrow" placeholder="Translation (English)..."></textarea>
        </div>
        <!-- Linguistic enrichment fields -->
        <div class="slot">
          <span class="tag">{{#str}} transcription, mod_flashcards {{/str}}</span>
          <div class="row has-action">
              <div class="input-wrap">
               <input id="uTranscription" type="text" placeholder="[IPA e.g. /hu:s/]">
            </div>
          </div>
        </div>
        <div class="slot">
          <span class="tag">{{#str}} pos, mod_flashcards {{/str}}</span>
          <div class="row has-action">
            <div class="input-wrap">
              <select id="uPOS">
              <option value="">-</option>
              <option value="substantiv">Substantiv ? navn pa steder, personer, ting og fenomener</option>
              <option value="adjektiv">Adjektiv ? beskriver substantiv</option>
              <option value="pronomen">Pronomen ? settes i stedet for et substantiv</option>
              <option value="determinativ">Determinativ ? bestemmer substantivet n?rmere</option>
              <option value="verb">Verb ? navn pa en handling</option>
              <option value="adverb">Adverb ? beskriver/modifiserer verb, adjektiv eller andre adverb</option>
              <option value="preposisjon">Preposisjon ? forteller hvor verbet/substantivet befinner seg i forhold til et annet verb/substantiv i bade tid og rom</option>
              <option value="konjunksjon">Konjunksjon ? binder sammen to og to ord av samme ordklasse eller to helsetninger</option>
              <option value="subjunksjon">Subjunksjon ? innleder leddsetninger</option>
              <option value="interjeksjon">Interjeksjon ? spesielle ord som gir et bilde av lyder som ikke kan skrives, folelser eller meninger</option>
              <option value="phrase">Phrase</option>
            </select>
            </div>
          </div>
          <div id="uPOSHelp" class="small"></div>
        </div>
        <div class="slot hidden" id="slot_gender">
          <span class="tag">{{#str}} gender, mod_flashcards {{/str}}</span>
          <select id="uGender">
            <option value="">-</option>
            <option value="hankjonn">hankjønn</option>
            <option value="hunkjonn">hunkjønn</option>
            <option value="intetkjonn">intetkjønn</option>
          </select>
        </div>
        <div class="slot hidden" id="slot_noun_forms">
          <span class="tag">{{#str}} noun_forms, mod_flashcards {{/str}}</span>
          <div class="row has-action">
            <input id="uNounIndefSg" type="text" placeholder="{{#str}} indef_sg, mod_flashcards {{/str}}">
            <input id="uNounDefSg" type="text" placeholder="{{#str}} def_sg, mod_flashcards {{/str}}">
            <input id="uNounIndefPl" type="text" placeholder="{{#str}} indef_pl, mod_flashcards {{/str}}">
            <input id="uNounDefPl" type="text" placeholder="{{#str}} def_pl, mod_flashcards {{/str}}">\n          </div>
        </div>
        <div class="slot hidden" id="slot_verb_forms">
          <span class="tag">{{#str}} verb_forms, mod_flashcards {{/str}}</span>
          <div class="row has-action">
            <input id="uVerbInfinitiv" type="text" placeholder="Infinitiv">
            <input id="uVerbPresens" type="text" placeholder="Presens">
            <input id="uVerbPreteritum" type="text" placeholder="Preteritum">
            <input id="uVerbPerfektum" type="text" placeholder="Perfektum partisipp">
            <input id="uVerbImperativ" type="text" placeholder="Imperativ">\n          </div>
        </div>
        <div class="slot hidden" id="slot_adj_forms">
          <span class="tag">{{#str}} adj_forms, mod_flashcards {{/str}}</span>
          <div class="row has-action">
            <input id="uAdjPositiv" type="text" placeholder="Positiv">
            <input id="uAdjKomparativ" type="text" placeholder="Komparativ">
            <input id="uAdjSuperlativ" type="text" placeholder="Superlativ">\n          </div>
        </div>
        <div class="slot">
          <span class="tag">{{#str}} collocations, mod_flashcards {{/str}}</span>
          <div class="row has-action">
            <textarea id="uCollocations" class="autogrow" placeholder="one per line..."></textarea>\n          </div>
        </div>
        <div class="slot">
          <span class="tag">{{#str}} examples, mod_flashcards {{/str}}</span>
          <div class="row has-action">
            <textarea id="uExamples" class="autogrow" placeholder="one per line..."></textarea>\n          </div>
        </div>
        <div class="slot">
          <span class="tag">{{#str}} antonyms, mod_flashcards {{/str}}</span>
          <div class="row has-action">
            <textarea id="uAntonyms" class="autogrow" placeholder="one per line..."></textarea>\n          </div>
        </div>
        <div class="slot">
          <span class="tag">{{#str}} cognates, mod_flashcards {{/str}}</span>
          <div class="row has-action">
            <textarea id="uCognates" class="autogrow" placeholder="one per line..."></textarea>\n          </div>
        </div>
        <div class="slot">
          <span class="tag">{{#str}} sayings, mod_flashcards {{/str}}</span>
          <div class="row has-action">
            <textarea id="uSayings" class="autogrow" placeholder="one per line..."></textarea>\n          </div>
        </div>
        <div class="slot">
          <span class="tag" id="t_order">{{#str}} order, mod_flashcards {{/str}}</span>
          <div id="orderChips" class="chips">
            <button class="chip" data-kind="audio"       id="chip_audio">{{#str}} audio, mod_flashcards {{/str}}</button>
            <button class="chip" data-kind="image"       id="chip_image">{{#str}} image, mod_flashcards {{/str}}</button>
            <button class="chip" data-kind="text"        id="chip_text">{{#str}} front, mod_flashcards {{/str}}</button>
            <button class="chip" data-kind="explanation" id="chip_explanation">{{#str}} explanation, mod_flashcards {{/str}}</button>
            <button class="chip" data-kind="translation" id="chip_translation">{{#str}} back, mod_flashcards {{/str}}</button>
          </div>
          <div class="small" id="orderPreview">audio -> image -> text -> explanation -> translation</div>
        </div>
        <div class="mono" id="status"></div>
        <div class="small" id="hintPerms">Open via HTTPS for camera/mic permissions.</div>
        </div>
      </div>
    </div>
    <div class="mono" id="debug"></div>
  </div>
  
  <!-- Fixed bottom action bar (feature-flagged via data-ux-bottom="1") -->
  <div id="bottomActions" class="bottom-actions hidden" role="toolbar" aria-label="{{#str}} rating_actions, mod_flashcards {{/str}}">
    <button id="btnEasyBottom" class="ok">{{#str}} easy, mod_flashcards {{/str}}</button>
    <button id="btnNormalBottom" class="mid">{{#str}} normal, mod_flashcards {{/str}}</button>
    <button id="btnHardBottom" class="hard">{{#str}} hard, mod_flashcards {{/str}}</button>
  </div>
  <div id="listModal" class="modal" role="dialog" aria-modal="true">
    <div class="box">
      <div class="row" style="justify-content:space-between;align-items:center;padding-left:12px">
        <strong id="t_listTitle">{{#str}} cards, mod_flashcards {{/str}}</strong>
        <button id="btnCloseList" class="iconbtn cross" title="{{#str}} close, mod_flashcards {{/str}}">&times;</button>
      </div>
      <div class="row" style="margin-top:10px;gap:10px;flex-wrap:wrap;padding-left:12px">
        <input id="listSearch" type="search" placeholder="{{#str}} search_ph, mod_flashcards {{/str}}" style="width:340px">
        <select id="listFilterDue" style="padding:6px">
          <option value="all">All cards</option>
          <option value="due">Due only</option>
        </select>
        <span id="listCount" class="badge">0</span>
      </div>
      <div style="overflow:auto;margin-top:10px">
        <table class="table" id="listTable">
          <thead>
            <tr>
              <th id="thFront">{{#str}} list_front, mod_flashcards {{/str}}</th>
              <th id="thStage">{{#str}} list_stage, mod_flashcards {{/str}}</th>
              <th id="thDue">{{#str}} list_due, mod_flashcards {{/str}}</th>
              <th id="thActions">Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="row" id="listPagination" style="margin-top:10px;justify-content:center;gap:10px;display:none">
        <button id="btnPagePrev" class="btn">Previous</button>
        <span id="pageInfo" class="badge">Page 1 of 1</span>
        <button id="btnPageNext" class="btn">Next</button>
      </div>
    </div>
  </div>
  </div>
  <!-- End Study Section -->

  <!-- Dashboard Section -->
  <div class="fc-tab-content" id="dashboardSection" role="tabpanel" aria-labelledby="tabDashboard">
    <div class="fc-dashboard-wrap">
      <!-- Stats Cards -->
      <div class="fc-stats-grid">
        <div class="fc-stat-card">
          <div class="fc-stat-icon icon-plus">&#10133;</div>
          <div class="fc-stat-value" id="statTotalCards">0</div>
          <div class="fc-stat-label" id="t_stat_total">{{#str}} dashboard_total_cards, mod_flashcards {{/str}}</div>
        </div>
        <div class="fc-stat-card">
          <div class="fc-stat-icon">&#128209;</div>
          <div class="fc-stat-value" id="statActiveVocab">0</div>
          <div class="fc-stat-label" id="t_stat_active_vocab">{{#str}} dashboard_active_vocab, mod_flashcards {{/str}}</div>
        </div>
        <div class="fc-stat-card fc-stat-streak">
          <div class="fc-stat-icon">&#128293;</div>
          <div class="fc-stat-value" id="statStreak">0</div>
          <div class="fc-stat-label" id="t_stat_streak">{{#str}} dashboard_streak, mod_flashcards {{/str}}</div>
        </div>
      </div>

      <!-- Charts -->
      <div class="fc-charts-grid">
        <div class="fc-chart-card">
          <h3 id="t_chart_stages">{{#str}} dashboard_stage_chart, mod_flashcards {{/str}}</h3>
          <canvas id="stageChart" width="300" height="300"></canvas>
        </div>
        <div class="fc-chart-card">
          <h3 id="t_chart_activity">{{#str}} dashboard_activity_chart, mod_flashcards {{/str}}</h3>
          <canvas id="activityChart" width="400" height="300"></canvas>
        </div>
      </div>

      <!-- Achievements -->
      <div class="fc-achievements">
        <h3 id="t_achievements">{{#str}} dashboard_achievements, mod_flashcards {{/str}}</h3>
        <div class="fc-achievement-grid">
          <div class="fc-achievement-card" id="achievement2">
            <div class="fc-achievement-icon">&#128293;</div>
            <div class="fc-achievement-title" id="t_ach2_title">{{#str}} achievement_week_warrior, mod_flashcards {{/str}}</div>
            <div class="fc-achievement-progress" id="ach2Progress">0/7</div>
          </div>

          <!-- Language Level Achievements -->
          <div class="fc-achievement-card" id="achievement5">
            <div class="fc-achievement-icon">🌱</div>
            <div class="fc-achievement-title" id="t_ach5_title">{{#str}} achievement_level_a0, mod_flashcards {{/str}}</div>
            <div class="fc-achievement-progress" id="ach5Progress">0/100</div>
          </div>
          <div class="fc-achievement-card" id="achievement6">
            <div class="fc-achievement-icon">🌿</div>
            <div class="fc-achievement-title" id="t_ach6_title">{{#str}} achievement_level_a1, mod_flashcards {{/str}}</div>
            <div class="fc-achievement-progress" id="ach6Progress">0/600</div>
          </div>
          <div class="fc-achievement-card" id="achievement7">
            <div class="fc-achievement-icon">🍀</div>
            <div class="fc-achievement-title" id="t_ach7_title">{{#str}} achievement_level_a2, mod_flashcards {{/str}}</div>
            <div class="fc-achievement-progress" id="ach7Progress">0/1500</div>
          </div>
          <div class="fc-achievement-card" id="achievement8">
            <div class="fc-achievement-icon">🌳</div>
            <div class="fc-achievement-title" id="t_ach8_title">{{#str}} achievement_level_b1, mod_flashcards {{/str}}</div>
            <div class="fc-achievement-progress" id="ach8Progress">0/2500</div>
          </div>
          <div class="fc-achievement-card" id="achievement9">
            <div class="fc-achievement-icon">🏆</div>
            <div class="fc-achievement-title" id="t_ach9_title">{{#str}} achievement_level_b2, mod_flashcards {{/str}}</div>
            <div class="fc-achievement-progress" id="ach9Progress">0/4500</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End Dashboard Section -->

  </div>
<!-- Field prompt modal for staged tasks -->
<div id="fieldPrompt" class="modal" role="dialog" aria-modal="true">
  <div class="box" style="max-width:560px">
    <div class="row" style="justify-content:space-between;align-items:center">
      <strong id="fpTitle">{{#str}} fill_field, mod_flashcards {{/str}}</strong>
      <button id="fpClose" class="iconbtn cross">&times;</button>
    </div>
    <div id="fpBody" style="margin-top:10px"></div>
    <div class="row" style="gap:8px;margin-top:12px">
      <button id="fpSave" class="ok">{{#str}} save, mod_flashcards {{/str}}</button>
      <button id="fpSkip" class="mid">{{#str}} skip, mod_flashcards {{/str}}</button>
    </div>
  </div>
</div>

